# --Config-- 7/15/2023 5:56:17 PM

# Some Game Settings I recommend:
# Creeper++ Grace: 9000
# Creeper++ Time: 9000
# Creeper++ Max: 1000 (Or any large number)
# Creeper Cutoff: 0
# Max Eggs: 0 (Eggs have a mind of their own and can't be controlled)
# Optionally - Overload Nullifiers

# Creeper++ Grace and Time must be the same value, and it must be synced with the creeper_Plus_Plus_Interval variable below.


# An A.D.A message with an empty box named "display" must be created.

# The playing area for an individual player must be a square with sides half of the X length of the map.
# The playing areas must be placed only on the left and right (not up and down).
# With these limitations, I believe the largest map dimensions you can have are 362x181.


# The delay between Creeper++ increments in game updates (30/s). Must be manually synced with the value set in the vanilla editor.
$creeper_Plus_Plus_Interval:9000

# How many additional units spore launchers and blob nests get every Creeper++ increase.
$launcher_CPP_Count_Increase:1

# The radius of the circle around enemy units that blocks unit launchers from firing near them.
$exclusion_Radius:10

# X Y Z Coordinates of the player's crystals they have to defend.
$leftCrystalPos:"22 7 149"
$rightCrystalPos:"340 7 149"

# How often spore launchers and blob nests randomly choose their target. The value must have an additional offset of 1 to prevent weird behaviour.
$launcher_Retarget_Interval:301

# Mirror Map Script
# This script will mirror the left side of the map onto the right, including copying over units and special terrain (not eco).
# Be aware that units already present on the right side do not get overwritten.
# I recommend copying this into a 4RPL console script for ease of use.


once if (false) # Delete this line
GetMapSize ->sizeZ ->sizeX
<-sizeX 2 / ->halfX

<-sizeZ 0 do
    <-halfX 0 do
        GetTerrain(i j) ->height
        SetTerrain(<-sizeX i - j <-height)
        
        GetTerrainSpecial(i j) ->special
        SetTerrainSpecial(<-sizeX i - j <-special)
    loop
loop

GetUnitsInRange(V3(<-sizeX 4 / 0 <-sizeZ 2 /) <-sizeX 4 / 1 - true false false 0 0 0) ->units

GetListCount(<-units) 0 do
    GetUnitPosition(<-units[i]) ->pos
    <-sizeX <-pos.x - ->pos.x
    
    GetUnitSettings(<-units[i]) ->params
    
    GetUnits("" <-pos 1 true false false 0 0 0) ->oldUnits
    DestroyUnit(<-oldUnits[0] true false true)

    CreateUnit(GetUnitType(<-units[i]) <-pos <-params) pop
loop
endif endonce # Delete this line












:GameLoaded
    <-creeper_Plus_Plus_Interval ->*CPP_INTERVAL
    <-launcher_CPP_Count_Increase ->*CPP_INCREASE
    <-launcher_Retarget_Interval ->*LAUNCHER_RETARGET_INTERVAL
    <-exclusion_Radius ->*EXCLUSION_RADIUS

    split(<-leftCrystalPos " ") ->pos
    V3(<-pos[0] <-pos[1] <-pos[2]) ->*leftCrystalPos

    split(<-rightCrystalPos " ") ->pos
    V3(<-pos[0] <-pos[1] <-pos[2]) ->*rightCrystalPos
